import{r as a,o as e,a as l,b as s,w as t,g as u,s as o,h as c,i,d as r,e as n,k as m,l as v,F as d,S as p,y as f,t as _,f as b,m as j,q as y}from"./index-BGdZDLVO.js";import{_ as g}from"./uv-input.CS2zCiHK.js";import{a as h,_ as k,r as w}from"./request.RFVXOHA2.js";import{a as x,_ as C,b as N}from"./subject.D8rmnr1Z.js";import{_ as S}from"./uv-empty.C1WgQU4D.js";import"./uv-icon.DXxGSX6z.js";import"./uni-icons.aWtZdbs2.js";const I=k({__name:"database",setup(k){const I=a(0),V=a(null),q=a([]),F=a(0),L=async()=>{const a=u("isCustomQuestion");console.log("===>",a),V.value=0!=a&&1!=a||a,""===V.value&&(console.log("sdfsdf"),V.value=!0),o({title:"加载中"});const e=await(a=>h("/topic/category/category/"+a))(V.value);q.value=e.data,0!==q.value.length&&$(q.value[0].id),c()},U=a([]),$=async a=>{const e=await x(a);U.value=e.data},z=a(null),A=()=>{U.value&&(z.value&&""!==z.value.trim("")?U.value=U.value.filter((a=>a.subjectName.toLowerCase().includes(z.value.toLowerCase().trim("")))):$(F.value))},B=()=>{z.value="",A()};return e((()=>{L()})),(a,e)=>{const u=w(l("uv-input"),g),h=i,k=p,x=y,V=w(l("uni-list-item"),C),L=w(l("uni-list"),N),H=w(l("uv-empty"),S);return r(),s(h,{class:"category-box"},{default:t((()=>[n(h,{class:"search"},{default:t((()=>[n(u,{modelValue:z.value,"onUpdate:modelValue":e[0]||(e[0]=a=>z.value=a),clearable:"",shape:"circle",onClear:B,placeholder:"在该分类下搜索题目专题",prefixIcon:"search",prefixIconStyle:"font-size: 22px;color: #909399",onBlur:A},null,8,["modelValue"])])),_:1}),n(h,{class:"menu"},{default:t((()=>[n(k,{class:"scroll-view_H","scroll-x":"true","show-scrollbar":!1,onScroll:a.scroll},{default:t((()=>[(r(!0),m(d,null,v(q.value,((a,e)=>(r(),m("span",{class:f({"menu-item":!0,selected:I.value===e}),key:e,onClick:l=>((a,e)=>{o({title:"加载中"}),z.value=null,F.value=e,I.value=a,$(e),c()})(e,a.id)},_(a.categoryName),11,["onClick"])))),128))])),_:1},8,["onScroll"])])),_:1}),n(h,{class:"list-item"},{default:t((()=>[U.value&&0!==U.value.length?(r(),s(L,{key:0},{default:t((()=>[(r(!0),m(d,null,v(U.value,(a=>(r(),s(V,{class:"item",showArrow:"",clickable:"",onClick:e=>(a=>{j({url:`/pages/database/subject/subject?id=${a.id}&name=${a.subjectName}`})})(a)},{header:t((()=>[n(x,{class:"avatar",src:a.imageUrl,mode:"aspectFill"},null,8,["src"]),b("span",{class:"title"},_(a.subjectName),1)])),_:2},1032,["onClick"])))),256))])),_:1})):(r(),s(H,{key:1,text:"系统正在收录专题数据哦～",icon:"../../static/images/empty.png"}))])),_:1})])),_:1})}}},[["__scopeId","data-v-eeebd3d1"]]);export{I as default};
