import{r as e,g as l,a as s,b as a,w as o,i as d,d as t,e as u,j as n,x as r,ae as i,E as c,p as f,T as w,R as p}from"./index-BGdZDLVO.js";import{_ as v}from"./uni-icons.aWtZdbs2.js";import{_ as m,r as _}from"./request.RFVXOHA2.js";import{i as P}from"./index.CzjDnQjI.js";const y=m({__name:"change",setup(m){const y=e(!1),h=e(!1),b=e(!1),g=e({oldPassword:"",newPassword:"",confirmPassword:""}),V=e(JSON.parse(l("h5UserInfo"))),x=async()=>{""!==g.value.oldPassword?""!==g.value.newPassword?g.value.newPassword===g.value.confirmPassword?(await P({id:V.value.id,password:g.value.oldPassword,newPassword:g.value.newPassword,confirmPassword:g.value.confirmPassword}),r({title:"修改成功",icon:"success"}),g.value={oldPassword:"",newPassword:"",confirmPassword:""},i(),setTimeout((()=>{c({url:"/pages/login/login",success:()=>{}})}),1e3)):r({title:"两次密码不一致",icon:"none"}):r({title:"请输入新密码",icon:"none"}):r({title:"请输入原密码",icon:"none"})};return(e,l)=>{const r=f,i=d,c=w,m=_(s("uni-icons"),v),P=p;return t(),a(i,{class:"change-box"},{default:o((()=>[u(i,{class:"section"},{default:o((()=>[u(i,{class:"list"},{default:o((()=>[u(i,{class:"row"},{default:o((()=>[u(i,{class:"left"},{default:o((()=>[u(r,{class:"label"},{default:o((()=>[n("原密码")])),_:1})])),_:1}),u(i,{class:"right"},{default:o((()=>[u(c,{class:"uni-input",type:y.value?"text":"password",modelValue:g.value.oldPassword,"onUpdate:modelValue":l[0]||(l[0]=e=>g.value.oldPassword=e),placeholder:"请输入原密码"},null,8,["type","modelValue"]),u(m,{type:y.value?"eye-filled":"eye-slash-filled",size:"20",color:"#999",onClick:l[1]||(l[1]=e=>y.value=!y.value)},null,8,["type"])])),_:1})])),_:1}),u(i,{class:"row"},{default:o((()=>[u(i,{class:"left"},{default:o((()=>[u(r,{class:"label"},{default:o((()=>[n("新密码")])),_:1})])),_:1}),u(i,{class:"right"},{default:o((()=>[u(c,{class:"uni-input",type:h.value?"text":"password",modelValue:g.value.newPassword,"onUpdate:modelValue":l[2]||(l[2]=e=>g.value.newPassword=e),placeholder:"请输入新密码"},null,8,["type","modelValue"]),u(m,{type:h.value?"eye-filled":"eye-slash-filled",size:"20",color:"#999",onClick:l[3]||(l[3]=e=>h.value=!h.value)},null,8,["type"])])),_:1})])),_:1}),u(i,{class:"row"},{default:o((()=>[u(i,{class:"left"},{default:o((()=>[u(r,{class:"label"},{default:o((()=>[n("确认密码")])),_:1})])),_:1}),u(i,{class:"right"},{default:o((()=>[u(c,{class:"uni-input",type:b.value?"text":"password",modelValue:g.value.confirmPassword,"onUpdate:modelValue":l[4]||(l[4]=e=>g.value.confirmPassword=e),placeholder:"请确认新密码"},null,8,["type","modelValue"]),u(m,{type:b.value?"eye-filled":"eye-slash-filled",size:"20",color:"#999",onClick:l[5]||(l[5]=e=>b.value=!b.value)},null,8,["type"])])),_:1})])),_:1})])),_:1}),u(i,{class:"submit-btn"},{default:o((()=>[u(P,{class:"btn","hover-class":"btn-hover",onClick:x},{default:o((()=>[n("确认修改")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-ade988f0"]]);export{y as default};
