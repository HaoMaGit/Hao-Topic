import{r as a,o as t,g as s,c as e,a as l,b as o,w as c,n,s as u,h as r,i,d,e as f,f as _,j as g,t as p,u as b,k as y,l as v,F as m,m as w,p as k,q as x,v as h,x as j}from"./index-BGdZDLVO.js";import{_ as C}from"./uni-icons.aWtZdbs2.js";import{_ as I,r as z}from"./request.RFVXOHA2.js";import{a as N,b as T,c as $}from"./index.hapG-hsu.js";function q(){const a=(new Date).getHours();return a>=0&&a<6?"凌晨":a>=6&&a<12?"上午":a>=12&&a<18?"下午":"晚上"}const F=I({__name:"index",setup(I){const F=a({}),S=async()=>{const a=await N();F.value=a.data},D=a([]),H=async()=>{const a=await T();D.value=a.data};t((()=>{(async()=>{u(),await Promise.all([S(),H()]),r()})()}));const J=a(JSON.parse(s("h5UserInfo"))),M=a(s("role")),O=e((()=>{const a={1:"管理员",2:"会员",0:"用户"};return a[M.value]||a[0]})),P=e((()=>{const a={1:"linear-gradient(to bottom, rgba(243, 156, 18, 0.6), rgba(243, 156, 18, 0.3) 30%, rgba(243, 156, 18, 0.1) 60%, transparent 90%)",2:"linear-gradient(to bottom, rgba(33, 33, 33, 0.8), rgba(212, 175, 55, 0.4) 40%, rgba(212, 175, 55, 0.1) 70%, transparent 90%)",0:"linear-gradient(to bottom, rgba(22, 119, 255, 0.6), rgba(22, 119, 255, 0.3) 30%, rgba(22, 119, 255, 0.1) 60%, transparent 90%)"};return a[M.value]||a[0]})),R=e((()=>({1:"#712a07",2:"#564021",0:"#203c71"}[M.value]||gradientMap[0]))),U=()=>{w({url:"/pages/index/ranking/ranking"})};return(a,t)=>{const s=k,e=i,I=z(l("uni-icons"),C),N=x;return d(),o(e,{class:"content",style:n({background:P.value})},{default:c((()=>[f(e,{class:"content-top"},{default:c((()=>[f(e,{class:"user-identity"},{default:c((()=>[_("h2",{class:"welcome",style:n({color:R.value})},[g(p(J.value.nickname||J.value.account),1),f(s,null,{default:c((()=>[g(p(O.value),1)])),_:1}),g("，"+p(b(q)())+"好！ ",1)],4)])),_:1}),f(e,{class:"content-bottom",style:n({color:R.value})},{default:c((()=>[f(e,{class:"count"},{default:c((()=>[g(" 今日已刷次数"),f(s,{class:"weight",style:{color:"#8a9ba8"}},{default:c((()=>[g(p(F.value.todayCount||0),1)])),_:1})])),_:1}),f(e,{class:"count"},{default:c((()=>[g(" 今日已刷题"),f(s,{class:"weight",style:n({color:R.value})},{default:c((()=>[g(p(F.value.todayTopicCount||0),1)])),_:1},8,["style"])])),_:1}),f(e,{class:"count"},{default:c((()=>[g(" 共刷题"),f(s,{class:"weight",style:{color:"#1677ff"}},{default:c((()=>[g(p(F.value.totalTopicRecordCount||0)+"/",1),_("span",{style:{color:"#0056b3","font-weight":"bold"}},p(F.value.totalTopicCount||0),1)])),_:1})])),_:1})])),_:1},8,["style"]),f(e,{class:"content-db",onClick:U},{default:c((()=>[f(e,{class:"text-box"},{default:c((()=>[f(s,{class:"sort",style:n({color:R.value})},{default:c((()=>{var a;return[g("刷题次数排名：第"+p(F.value.rank||0)+"名 / 总"+p(null==(a=F.value)?void 0:a.userCount)+"人",1)]})),_:1},8,["style"])])),_:1}),f(I,{type:"arrow-right",size:"24",color:R.value,class:"clickable-icon"},null,8,["color"]),f(N,{class:"rank-img",src:"/assets/zzjb-CWc5VI1S.png",mode:"aspectFill"})])),_:1})])),_:1}),f(e,{class:"content-center"},{default:c((()=>[f(e,{class:"title-box"},{default:c((()=>[f(I,{type:"calendar",style:n({color:R.value}),size:"30"},null,8,["style"]),_("h4",{class:"title-text",style:n({color:R.value})},"每日刷题",4)])),_:1}),f(e,{class:"list-box"},{default:c((()=>[f(e,{class:"list-wrapper"},{default:c((()=>[(d(!0),y(m,null,v(D.value,(a=>(d(),o(e,{class:"list-item",key:a},{default:c((()=>[f(e,{class:"item-content",onClick:t=>(async a=>{a.subjectId?(u(),await $(a.id),r(),w({url:`/pages/database/topic/topic?id=${a.topicId}&name=${a.topicName}&subjectId=${a.subjectId}`})):j({title:"该专题不存在或被禁用了",icon:"none"})})(a)},{default:c((()=>[f(e,{class:"item-right"},{default:c((()=>[f(s,{class:"title"},{default:c((()=>[g(p(a.topicName),1)])),_:2},1024),0==a.status?(d(),o(s,{key:0,class:"status-text"},{default:c((()=>[g("未刷")])),_:1})):h("",!0),1==a.status?(d(),o(s,{key:1,class:"status-text ys"},{default:c((()=>[g("已刷")])),_:1})):h("",!0)])),_:2},1024),f(e,{class:"info-row"},{default:c((()=>[(d(!0),y(m,null,v(a.labelNames,(a=>(d(),o(e,{class:"tags-row"},{default:c((()=>[f(e,{class:"tag"},{default:c((()=>[g(p(a),1)])),_:2},1024)])),_:2},1024)))),256))])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["style"])}}},[["__scopeId","data-v-52824d67"]]);export{F as default};
